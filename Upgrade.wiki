#summary Explains the upgrade process from 1.1 to 1.2.

<h1>Upgrade Course Builder Versions</h1>

<wiki:toc />

=Upgrade from 1.3.1 to 1.4.0=
Before you deploy to Google App Engine with 1.4.0, you must update your index. First, use the same upgrade procedures as [Upgrade#Upgrade_from_1.2.x_to_1.3.0 upgrading to 1.3.0 from 1.2.x]. In those instructions:
  * Replace 1.2.x with 1.3.1 
  * Replace 1.3.0 with 1.4.0

Next, before you deploy to Google App Engine:
  # In the [FAQ#What_is_a_shell_or_command_prompt? terminal], go to your Course Builder root directory.
  # Use the [UploadCode#Upload_(or_deploy)_your_app appcfg.py] command to update your index by typing (do not forget the period at the end): {{{appcfg.py update_indexes .}}}

You are prompted for your email and application-specific password. There are no messages from the terminal if you are successful. If you do not build/update your index, you see Google App Engine errors until you do so. 

You can track the statuses of your applications' indices by clicking on the *Datastore Indexes* menu item in the Google App Engine admin console.

<img src="http://wiki.course-builder.googlecode.com/git/images/datastore-indexes-menu.png" width="600">

While your indices are building, you see a screen similar to the following: 

<img src="http://wiki.course-builder.googlecode.com/git/images/datastore-indexes-building.png" width="600">

The time an index takes to build depends on the amount of data being indexed. For many users this will be fast. However, if you have a lot of data in the datastore you may have to wait for some time, up to days, for the indices to finish building. Plan ahead if you have lots of data. You only need to do this during a Course Builder upgrade.

When indices are ready to serve, you see a screen that looks like the following:

<img src="http://wiki.course-builder.googlecode.com/git/images/datastore-indexes-serving.png" width="600">

The important point is the text under *Status*. When it says *Serving*, you should no longer experience errors.

=Upgrade from 1.3.0 to 1.3.1=
Please use the same upgrade procedures as [Upgrade#Upgrade_from_1.2.x_to_1.3.0 upgrading to 1.3.0 from 1.2.x]. In those instructions:
  * Replace 1.2.x with 1.3.0 
  * Replace 1.3.0 with 1.3.1.

=Upgrade from 1.2.x to 1.3.0=
  # Make a copy of your current 1.2.x version of Course Builder.
  # Download and install version 1.3.0.
  # Copy the {{{/assets}}} and {{{/data}}} folders from 1.2.x to 1.3.0.
  # Copy your {{{course.yaml}}} from 1.2.x to 1.3.0.
  # Change your course name in {{{app.yaml}}} in 1.3.0.
  # Manually transfer other modifications you made in the individual template files.
  # Manually transfer any modifications you made to the Python .py files.
  # In *Admin > Courses* create a [CreateNewCourse new course].
  # [Dashboard#Outline Import] your old (read-only) course into the new course you created.
  # In your new course, go to *Dashboard > Settings > Contents of course.yaml file* and click *Edit*.
  # Delete all the contents in the text box.
  # Copy all the contents of your {{{course.yaml}}} file that is now in your 1.3.0 installation into the text box. Be careful of any extra spaces, which can cause an error.
  # Add this line in the {{{course}}} section: 
    {{{  
    now_available: False
    }}}
    Make sure you add the indentation (two spaces) before the specification. For example,
    {{{
    course:
      # Course title
      title: 'My New Example Course'
      
      # Course Availability
      now_available: False
    }}}
  # Click *Save*.
  # Go to *Admin > Settings > gcb_courses_config* and click *Edit*.
  # Make your new course the root URL and place your old course on the URL path that you specified when creating your new course:
    # In the final value ({{{course:/:/:}}})) delete the {{{/}}} entry from the location entry. Your new course will get its data from the datastore, not from the file system.
    # Add the datastore namespace of your new course. For example, if you specified {{{aux}}} as your Unique Name when you created your new course, your {{{gcb_courses_config}}} values will look like:   
    {{{
    course:/aux:/:
    course:/::ns_aux
    }}}
    # Click *Save*. The page itself shows how to interpret and specify the {{{gcb_courses_config}}} values.

=Upgrade from 1.1.x to 1.2.x=
  # Make a copy of your current 1.1.x version of Course Builder
  # Download and install version 1.2
  # Copy the {{{/assets}}} and {{{/data}}} folders from 1.1.x to 1.2.
  # Manually transfer the modifications you made in the {{{#FIXME}}} sections in the individual template files in the {{{/views}}} directory to the new {{{course.yaml}}} file. In 1.2, you can make all these customizations in one place, the {{{course.yaml}}} file, instead of to each individual template file.
  # Manually transfer other modifications you made in the individual template files.
  # Manually transfer any modifications you made to the Python .py files.