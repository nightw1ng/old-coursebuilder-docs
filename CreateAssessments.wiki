#summary How to create assessments (graded tests) for your course.

<h1>Create Assessments</h1>

<wiki:toc />

At certain parts throughout the course, students take assessments to see how they're doing:

<img src="http://wiki.course-builder.googlecode.com/git/images/assessment-zig.png" height=265 width=420 />

We strongly encourage you to write assessment questions through [Dashboard#Assets Dashboard > Assets > Question Bank] and put them in your assessments as a question component. The effect is the same for students but it is much easier for you to create questions through the WYSIWYG interface than it would be to write the questions using !JavaScript and HTML.

This page talks about the mechanics of creating an assessment. For information on what to put in your assessment, see [TwoDevelop#Decide_what_you_want_to_test_in_your_assessments,_both_graded_an Develop the Content without Technology].

== What happens on an assessment page ==

An assessment is a graded test, typically covering material from several units and lessons. With our experimental code, you have control over how many graded assessments you provide and how each of those assessments counts in the final scoring for a studentâ€™s grade. 

When students submit an assessment, the code determines how they did on the assessment and provides the feedback you specify. It also stores the student score for later retrieval.

== Page layout ==

This page consists of three areas:
  * The *header* is the same as for the home page. See [ModifyTemplate Modify Course Template] for information about this file.
  * The *content area* contains the questions and answer areas and a submit button.
  * The *footer* is the same as for the home page. See [ModifyTemplate Modify Course Template] for information about this file.

The app uses several files to render this page:
  * {{{views/base.html}}} defines the header and footer areas.
  * {{{views/assessment.html}}} defines the structure of the content area.
  * {{{assets/js/assessment-}}}_*{{SUFFIX}}}*_{{{.js}}} contains a !JavaScript object that fills in the actual question and answer areas for the assessment. Each assessment has its own file.

== Writing assessments ==

An assessment contains explanatory text and one or more questions for the student.

Create new and edit existing assessments through the Dashboard.

http://wiki.course-builder.googlecode.com/git/images/assessment-edit.png

To add a new assessment:

 # Go to the Dashboard. The *Outline* tab is the default landing tab.
 # Click the *Add Assessment* button in the *Pages* section.
 # In the *Title* field, type the name of the new assessment.
 # In the *Assessment Content* field, click the *Rich Test* button.
 # Add your question, or any other component, through the component editor. The component editor is the red tool box under *Insert Item*.
 # Choose the options you like. For example, select the *"Check Answers" Buttons* option.
 # Change the status of the assessment to *Public*.
 # Click Save
 
In the Course Builder code, the example assessments are their own !JavaScript file. The filenames have the form {{{assessment-}}}_*{{{SUFFIX}}}*_{{{.js}}}. For the sample course _*{{{SUFFIX}}}*_ is one of {{{Pre}}}, {{{Mid}}}, or {{{Fin}}}. 
The file contains a single object named {{{assessment}}}. This object describes everything the code needs to know about an assessment. The attributes of the {{{assessment}}} object are as follows:

  * {{{assessmentName.}}} This attribute is optional, since the name will be taken directly from the *Title* field. The {{{assessmentName}}} attribute is a string containing a unique name for this assessment. The code uses the assessment name to determine what special processing to do for an assessment. The sample course uses {{{"precourse"}}}, {{{"midcourse"}}}, and {{{"postcourse"}}}. See [#Assessment_name Assessment name].
  * {{{preamble.}}} A string containing text and complete HTML elements. The preamble appears as the first thing on the assessment page.  See [#Preamble Preamble].
  * {{{checkAnswers.}}} A Boolean. If {{{True}}}, then students can check their answers before submission.  (Note that case is important in this value; it must be either {{{True}}} or {{{False}}}.) See [#Submitting_and_checking_answers Submitting and checking answers].
  * {{{questionsList.}}} An ordered array, each of whose elements describes a question in the assessment. The questions appear after the preamble. See [#Questions Questions]. 

=== Assessment name ===

For the sample course, the value of the {{{assessmentName}}} attribute is one of  {{{"precourse"}}}, {{{"midcourse"}}}, or {{{"postcourse"}}}. The code in {{{controllers/assessments.py}}} uses {{{assessmentName}}} to determine how to score assessments. See [#Scoring Scoring].

When students complete an assessment, they see a message about how they did. You can change the contents of these messages in {{{views/test_confirmation.html}}}. (See [#Submitting_and_checking_answers Submitting and checking answers].)

=== Preamble ===

The value of the {{{preamble}}} attribute is a string that contains a set of complete HTML elements. That is, if the string contains an open HTML tag (such as {{{<em>}}}), it must also have the corresponding close tag (such as {{{</em>}}}). The code simply renders the HTML you enter as the first thing on the assessment page.

Also note that the entire string must be on a single line. If you want it to render as multiple lines, you must include the appropriate HTML markup.

The following code snippet is a preamble example:

{{{
var assessment = {
  preamble: '<b>This assessment addresses content in units 1-6. You can try it as many times as you like. When you click "Check Answers," we will give you your score and give you a list of lessons to review.</b><br>',
  }
}}} 

=== Submitting and checking answers ===

The bottom of an assessment page always includes a *Save Answers* button. When students submit an assessment by clicking on this button, they see a page such as the following:

http://wiki.course-builder.googlecode.com/git/images/assessment-submit.png

By default, this page acknowledges that they submitted the assessment and gives them information about next steps. You can change the messages for different assessments by changing the file at {{{views/test_confirmation.html}}}.

Notice that this page does not tell students how they did on the assessment or give any feedback about what they might want to study some more. You can give students the option of checking their answers before submitting an assessment. If you set the {{{checkAnswers}}} attribute of the {{{assessment}}} object to {{{True}}}, then the assessment page has an additional *Check your Answers* button and an area for feedback, as shown here:

http://wiki.course-builder.googlecode.com/git/images/assessment-check.png 

The feedback contains the student's score. If the student doesn't answer all questions correctly, the code displays which lessons the student should review to improve their score. How you specify this information is discussed in the next section.

The following code snippet is an example of turning on check settings. The boolean value is case sensitive.

{{{
var assessment = {
  checkAnswers: true  
  }
}}}

=== Questions ===


The {{{questionsList}}} attribute is an ordered array of !JavaScript objects, each of which describes a question in the assessment.

Each question object has three attributes. Two of these are the same for all question types. Which third attribute you include determines what type of question this is.

The common attributes are:

  * {{{questionHTML.}}} A string containing text and complete HTML elements. This string is the text to display for this question. As with a preamble string, if this string contains an open HTML tag (such as {{{<em>}}}), it must also have the corresponding close tag (such as {{{</em>}}}). Also note that the entire string must be on a single line. If you want it to render as multiple lines, you must include the appropriate HTML markup.

  * {{{lesson.}}} A string representing the lesson (or lessons) that cover the material this question is about. The app displays this string if the student incorrectly answers the question and has requested the app to [#Submitting_and_checking_answers check answers].

A question can be one of four types, depending on the third attribute:

  * {{{choices.}}}  A multiple-choice question. The value of the {{{choices}}} attribute is an array of strings and one function call.  Each string represents a possible wrong answer to the question. You specify the correct answer with a function call of the form {{{correct(}}}_*{{{string}}}*_{{{)}}}, where _*{{{string}}}*_ is a string containing the correct answer. Students see a set of radio buttons to choose from as with multiple-choice questions in [CreateActivities#Single_multiple-choice_question activities]. 

  * {{{correctAnswerNumeric.}}}   A number. For questions with a numeric answer. The value of the attribute is the correct answer.

  * {{{correctAnswerString.}}} A case-insensitive exact string match. For example, if the value is {{{"hello"}}}, then {{{Hello}}} and {{{hello}}} are both correct, but {{{HelloWorld}}} is incorrect. Use this attribute when your question requires a specific string answer.

  * {{{correctAnswerRegex.}}}  Free text. The value of this attribute is a regular expression capturing the correct answer. Use this attribute when your question is more open ended than a string match can handle. In this case, the code uses a [https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions regular expression] to verify the answer. Regular expressions can be notoriously difficult for a programmer to get right. For this reason, you need to be very careful with the wording of any question that takes a free text answer. Your regular expression needs to account for reasonable variations in student responses.  

The following code snippet is an example of an assessment question.

{{{
var assessment = {

  questionsList: [
    {questionHTML: 'Where will the Summer Olympics of 2016 be held?',
     choices: ['Chicago', 'Tokyo', correct('Rio de Janeiro'), 'Madrid', 'I don\'t know'],
     lesson: '1.4'},

  {questionHTML: 'In the 2012 Summer Olympics, who won the women\'s 100 meter gold medal?',
     choices: ['Carmelita Jeter',
               'Veronica Campbell-Brown',
               'Blessing Okagbare',
               correct('Shelly-Ann Fraser-Pryce'),
               "I don't know"],
      lesson: '4.1'},

  {questionHTML: 'You decide to attend the Summer Olympics and find yourself surrounded by Portuguese speakers. How would you say, "Is there a cheap restaurant around here?" in Portuguese?"<br/>[this version of the question uses a case-insensitive string match]',
     correctAnswerString: 'existe um rest?',
     lesson: '4.5'},

  {questionHTML: 'You decide to attend the Summer Olympics and find yourself surrounded by Portuguese speakers. How would you say, "Is there a cheap restaurant around here?" in Portuguese?"<br/>[this version of the question uses a regular expression match]',
     correctAnswerRegex: /existe um rest?/i,
     lesson: '4.5'},

  {questionHTML: 'This is an example of a numeric freetext question. What is 3.2 + 4.7?',
     correctAnswerNumeric: 7.9,
     lesson: '99.99'},  
  ],
}
}}}

=== Scoring ===

Aspects of scoring for assessments takes place in two places in the code:

  * In {{{assets/lib/activity-generic-1.3.js}}}, {{{checkOrSubmitAnswers}}} determines the score of each assessment. The default formula is simply a percentage of the number of correct answers out of the total number of questions in that assessment. 

  * In {{{controllers/assessments.py}}}, {{{storeAssessmentData}}} does a couple of scoring things:
    * It determines when to store an assessment score. By default, it stores the score either if it's the first time the student has taken this assessment or if this score is higher than the previously-stored score. 
    * When storing the score for the final assessment of the course, {{{storeAssessmentData}}} also computes the student's score for the entire course. The default scoring for the entire course uses the mid-term assessment as 30% of the score and the final assessment as 70% of the score.

If you want the default scoring and you use the default number of assessments, you do not need to change any code.

If you have a different number of assessments, you should change how {{{storeAssessmentData}}} computes the overall score. Note that {{{storeAssessmentData}}} uses the {{{assessmentName}}} attribute to identify each assessment.

If you want to change the default scoring, you should specify {{{weight}}} directly in the assessment. For multiple choice answers, you can specify the weight of the question as well as the weight of the individual answers by specifying {{{weight}}} with {{{choiceScores}}}. For example, you can give partial credit for one answer while giving full credit for another answer.

  * {{{weight}}}: Indicates the number of points a particular question is worth. The number must be an integer. The default value is {{{1}}}.
  * {{{choiceScores}}}: Indicates the weights for the answers in a particular answer group. The weights are specified through an array of floating point values between 0.0 and 1.0, inclusive. The individual value of an answer is multiplied by the integer specified in {{{weight}}}.   

The following example specifies that the first question is worth five points while the second question is worth six points:

{{{
var assessment = {
  questionsList: [
{questionHTML: 'How many total Olympic gold medals has Carl Lewis won?',
     choiceScores: [0.2,0.4,0.6,0.8,1.0],
     weight: 5,
     choices :['4','5','7','8',correct('9')]},

    {questionHTML: 'How many Judo throws are recognized by the Kodokan Judo Institute?',
      choiceScores: [0.0,0.0,0.0,0.8,1.0],
      weight: 4,
      choices :['17','26','33','40',correct('67')]},

    {questionHTML: 'What is the last name of the Women\'s 2010 Winter Olympic snowboard half-pipe gold medal winner?',
     correctAnswerString: 'Bright',
     weight: 5}
  ]
}
}}}

== Changing the number of assessments through the development server ==

By default, Course Builder supports 3 assessments -- a precourse assessment, midterm assessment, and final assessment. The precourse assessment is not included in the overall score for the course.

You can change Course Builder to use more or fewer assessments. To do so, you need to make the following changes:

  # Create a separate {{{assessment-}}}_*{{{SUFFIX}}}*_{{{.js}}} file for each assessment. Using the default suffixes of {{{Pre}}}, {{{Mid}}}, and {{{Fin}}} for those 3 assessments is optional. See [#Writing_assessments Writing assessments] for details on creating assessment files. A couple of points:
    * You need the suffix in the next step when updating {{{data/unit.csv}}} to include the new assessment.
    * In each assessment file, you choose a value for the {{{assessmentName}}} attribute. The scoring function in {{{controllers/assessments.py}}} uses these values.
  # Change {{{data/unit.csv}}} to add your assessments to the appropriate points in your course. See [CreateHomePage#Home_page_content Home page content] for details.
  # Update {{{storeAssessmentData}}} in {{{controllers/assessments.py}}} to consider all assessments when computing the student's overall score for the course. See [#Scoring Scoring].
  # Update {{{views/student_profile.html}}} to display information about the assessments on the student's profile page. This file identifies which information to display using values supplied by {{{storeAssessmentData}}}. See [ModifyProfile#Student_information Modify My Profile Tab]. 
  # Update {{{views/test_confirmation.html}}} to display appropriate confirmation messages upon completion of each assessment. This file identifies which message to send using values supplied by {{{storeAssessmentData}}}.


== Testing changes ==

Changes you make to any file in the {{{views}}} directory appear automatically in your running development server. That is, after you make a change to one of these files, simply load (or reload) a page that uses that view and the change appears.

To see how to make these changes in your live, deployed course, see [UploadCode Deploy Your App].

A couple of hints for !JavaScript debugging:

  * Consider using a !JavaScript editor or IDE that highlights errors. 

  * If you use Google Chrome to test your app, consider using the !JavaScript console. (See [https://developers.google.com/chrome-developer-tools/docs/console Chrome Developer Tools: Console].) The console shows fairly detailed information about !JavaScript parse errors.

|| [https://groups.google.com/forum/?fromgroups#!categories/course-builder-forum/customize-and-deploy-course-builder-code Ask questions in the forum] ||